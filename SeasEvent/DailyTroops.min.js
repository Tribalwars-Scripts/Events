(async()=>{function a(a){return new Promise(c=>setTimeout(c,a||b))}let b=1e3;await(async()=>{console.group("DailyTroops Function");const b=async()=>{function c(a){let b=$("#content_value")[0].clientWidth;$("#content_value").eq(0).prepend(`
    <div id="progressbar" class="progress-bar progress-bar-alive">
        <span class="count label">0/${a}</span>
        <div id="progress"><span class="count label" style="width: ${b}px;">0/${a}</span></div>
    </div>`)}function d(a,b,c){$("#progress").css("width",`${100*((a+1)/b)}%`),$(".count").text(`${c} ${a+1} / ${b} Daily Troops.`)}function e(){0<$("#progressbar").length&&$("#progressbar").remove(),UI.BanneredRewardMessage("Daily Troops redeemed",1e4)}console.group("DailyTroops checkRequirements");const f={pop:game_data.village.pop,pop_max:game_data.village.pop_max,pop_min:20,res:{wood:game_data.village.wood,stone:game_data.village.stone,iron:game_data.village.iron},spear:[50,30,10],spear_min:[]};if(f.spear_min=f.spear.map(a=>a*f.pop_min),console.dir(f),f.pop_max-f.pop>f.pop_min)console.group("DailyTroops checkRequirements Min Pop Passed."),await(async()=>{c(10);const b="barracks",f=async(c=1)=>{TribalWars.post(b,{ajaxaction:"train",mode:"train"},{units:{spear:c}},function(){UI.SuccessMessage("Successfully recruited 1 spear",100)}),await a(1e3)},g=async()=>{const c=()=>{const a=document.querySelectorAll("li.granted"),b=document.querySelectorAll(".daily-grants > ul > li");return[a,b]};d(--c()[0].length,c()[1].length,"Recruited");const g=async()=>{for(let a=0;1>a;a++)await(async()=>{await f()})();await(async()=>{TribalWars.get(b,{action:"cancel_all",mode:"train",building:b},{},function(){UI.SuccessMessage("Successfully cancelled the recruitment process",100)}),await a(1e3)})()};for(let a=c();a[0].length!==a[1].length;)d(a[0].length,a[1].length,"Recruited"),await g(),a=c();e()},h=document.querySelectorAll("granted");h?await g():await f().then(async()=>await g())})();else if(1<parseInt(game_data.player.villages)&&game_data.features.Premium.active)document.querySelector("#village_switch_right").click(),await a(500),await b();else return 0};await b()})()})();